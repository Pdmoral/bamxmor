(self["webpackChunkbamxx"]=self["webpackChunkbamxx"]||[]).push([[2],{7002:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>be});var t=a(3673);const r={class:"staff__button row justify-center q-px-xl q-py-md"},l={class:"container q-py-xl"},i={class:"row q-px-md"};function o(e,s,a,o,d,n){const u=(0,t.up)("q-btn"),m=(0,t.up)("AddUser"),c=(0,t.up)("q-dialog"),p=(0,t.up)("UserCard");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",r,[(0,t.Wm)(u,{class:"q-py-sm q-my-sm",label:"Agregar personal",icon:"add",color:"blue",onClick:s[0]||(s[0]=e=>o.add=!0)}),(0,t.Wm)(c,{modelValue:o.add,"onUpdate:modelValue":s[1]||(s[1]=e=>o.add=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{onNewUser:n.addUser,onCloseDialog:n.closeDialog},null,8,["onNewUser","onCloseDialog"])])),_:1},8,["modelValue"])]),(0,t._)("div",l,[(0,t._)("div",i,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(d.users,(e=>((0,t.wg)(),(0,t.iD)("div",{key:e.id,class:"col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2 q-py-xl q-px-md"},[(0,t.Wm)(p,{onEditUser:n.editUser,onRemoveUser:n.removeUser,user:e},null,8,["onEditUser","onRemoveUser","user"])])))),128))])])],64)}var d=a(1959),n=a(5474),u=a(6249);const m={class:"full-width row justify-between q-py-lg q-px-xl"},c={class:"col-6 col-md-11 flex"},p=(0,t._)("span",{class:"dialog__title q-my-auto q-pl-md text-h5"}," Añadir usuario ",-1),g={class:"col-6 col-md-1 flex"},h={class:"q-py-lg q-px-xl text-h6"},A=(0,t.Uk)(" Nombre(s) "),w=(0,t.Uk)(" Apellido(s) "),U=(0,t.Uk)(" Email "),v=(0,t.Uk)(" Usuario "),f=(0,t.Uk)(" Contraseña "),y=(0,t.Uk)(" Confirmar contraseña "),k=(0,t.Uk)(" Puesto "),P=(0,t.Uk)(" Imagen "),x={class:"column content-center"};function b(e,s,a,r,l,i){const o=(0,t.up)("q-icon"),d=(0,t.up)("q-btn"),n=(0,t.up)("q-input"),u=(0,t.up)("q-select"),b=(0,t.up)("q-file"),q=(0,t.up)("q-form"),V=(0,t.up)("q-card-section"),I=(0,t.up)("q-card"),C=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(I,{class:"dialog full-width column"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{class:"q-px-xl full-width column"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,null,{default:(0,t.w5)((()=>[(0,t._)("div",m,[(0,t._)("div",c,[(0,t.Wm)(o,{name:"account_circle",size:"300%"}),p]),(0,t._)("div",g,[(0,t.wy)((0,t.Wm)(d,{class:"q-ml-auto",size:"md",icon:"cancel",flat:"",round:""},null,512),[[C]])])]),(0,t._)("div",h,[A,(0,t.Wm)(n,{class:"q-py-md",outlined:"",clearable:"",ref:"name",modelValue:l.newUser.firstName,"onUpdate:modelValue":s[0]||(s[0]=e=>l.newUser.firstName=e),type:"text","lazy-rules":"",rules:[e=>!!e||"Campo Obligatorio",e=>e.length<45||"El nombre debe ser menor a 45 caracteres",e=>i.isValidInput(e)||"Entrada no válida. Solo se aceptan letras"]},null,8,["modelValue","rules"]),w,(0,t.Wm)(n,{class:"q-py-md",outlined:"",clearable:"",ref:"lastname",modelValue:l.newUser.lastName,"onUpdate:modelValue":s[1]||(s[1]=e=>l.newUser.lastName=e),type:"text","lazy-rules":"",rules:[e=>!!e||"Campo Obligatorio",e=>e.length<45||"El apellido debe ser menor a 45 caracteres",e=>i.isValidInput(e)||"Entrada no válida. Solo se aceptan letras"]},null,8,["modelValue","rules"]),U,(0,t.Wm)(n,{class:"q-py-md",outlined:"",clearable:"",ref:"email",modelValue:l.newUser.email,"onUpdate:modelValue":s[2]||(s[2]=e=>l.newUser.email=e),type:"text","lazy-rules":"",rules:[e=>!!e||"Campo Obligatorio",e=>i.isValidEmailAddress(e)||"Inserte una direccion de correo electronica valida"]},null,8,["modelValue","rules"]),v,(0,t.Wm)(n,{class:"q-py-md",outlined:"",clearable:"",ref:"user",modelValue:l.newUser.username,"onUpdate:modelValue":s[3]||(s[3]=e=>l.newUser.username=e),type:"text","lazy-rules":"",rules:[e=>!!e||"Campo Obligatorio",e=>e.length<45||"El nombre de usuario debe ser menor a 45 caracteres",e=>i.isValidUser(e)||"Entrada no valida, solo se permiten letras y numeros"]},null,8,["modelValue","rules"]),f,(0,t.Wm)(n,{class:"q-py-md",outlined:"",clearable:"",ref:"password1",modelValue:l.newUser.password,"onUpdate:modelValue":s[5]||(s[5]=e=>l.newUser.password=e),type:r.pwd?"password":"text","lazy-rules":"",rules:[e=>!!e||"Campo Obligatorio",e=>e.length<=32||"La contraseña debe ser menor o igual a 32 caracteres",e=>i.isValidPassword(e)||"Se requieren: mayusculas, minusculas, numeros y signos. De 8 a 32 caracteres."]},{append:(0,t.w5)((()=>[(0,t.Wm)(o,{name:r.pwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[4]||(s[4]=e=>r.pwd=!r.pwd)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),y,(0,t.Wm)(n,{class:"q-py-md",outlined:"",clearable:"",ref:"password2",modelValue:l.newUser.confirmPassword,"onUpdate:modelValue":s[7]||(s[7]=e=>l.newUser.confirmPassword=e),type:r.confirmPwd?"password":"text","lazy-rules":"",rules:[e=>!!e||"Campo Obligatorio",e=>e.length<=32||"La contraseña debe ser menor o igual a 32 caracteres",e=>i.isValidPassword(e)||"Se requieren: mayusculas, minusculas, numeros y signos. De 8 a 32 caracteres."]},{append:(0,t.w5)((()=>[(0,t.Wm)(o,{name:r.confirmPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[6]||(s[6]=e=>r.confirmPwd=!r.confirmPwd)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),k,(0,t.Wm)(u,{outlined:"",ref:"type",modelValue:l.newUser.userTypeId,"onUpdate:modelValue":s[8]||(s[8]=e=>l.newUser.userTypeId=e),options:r.options,class:"q-py-md","lazy-rules":"",rules:[e=>!!e||"Campo obligatorio"]},null,8,["modelValue","options","rules"]),P,(0,t.Wm)(b,{outlined:"",class:"dialog__upload q-my-md",modelValue:l.newUser.image,"onUpdate:modelValue":s[9]||(s[9]=e=>l.newUser.image=e),accept:".jpg, .jpeg, .png, image/*","max-file-size":"5242880",onRejected:s[10]||(s[10]=e=>i.error("El archivo no es una imagen o pesa más de 5 MB. Inténtelo de nuevo"))},{prepend:(0,t.w5)((()=>[(0,t.Wm)(o,{name:"attach_file"})])),_:1},8,["modelValue"])]),(0,t._)("div",x,[(0,t.Wm)(d,{type:"submit",size:"lg",push:"",icon:"check",color:"green",label:"Confirmar",onClick:s[11]||(s[11]=e=>i.addUser())})])])),_:1})])),_:1})])),_:1})}a(71);const q={name:"AddUser",data(){return{newUser:{}}},setup(){return{dialog:(0,d.iH)(!1),pwd:(0,d.iH)(!0),confirmPwd:(0,d.iH)(!0),options:["Admin","Punto de venta","Trabajador Social"]}},methods:{success(e){this.$q.notify({message:e,icon:"done",color:"green"})},error(e){this.$q.notify({message:e,icon:"error",color:"red"})},isValidInput(e){const s=/^.[.a-zA-ZÀ-ÿ\u00f1\u00d1]+(\s*[.a-zA-ZÀ-ÿ\u00f1\u00d1]*)*[.a-zA-ZÀ-ÿ\u00f1\u00d1]+$/;return s.test(String(e))},isValidEmailAddress(e){const s=/^(([^<>()\]\\.,;:\s@"]+(\.[^<>()\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return s.test(String(e).toLowerCase())},isValidPassword(e){const s=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!.%*?&])([A-Za-z\d$@$!%*?&]|[^ ]){8,32}$/;return s.test(String(e))},isValidUser(e){const s=/^[A-Za-z0-9\s]+$/g;return s.test(String(e))},addUser(){if(this.$refs.name.validate(),this.$refs.lastname.validate(),this.$refs.email.validate(),this.$refs.user.validate(),this.$refs.password1.validate(),this.$refs.password2.validate(),this.newUser.password!=this.newUser.confirmPassword)return void this.error("Las contraseñas no coinciden. Inténtelo de nuevo");if(null==this.newUser.userTypeId)return void this.error("El puesto no puede quedar vacío");"Admin"==this.newUser.userTypeId?this.newUser.userTypeId=1:"Punto de venta"==this.newUser.userTypeId?this.newUser.userTypeId=2:"Trabajador Social"==this.newUser.userTypeId&&(this.newUser.userTypeId=3);const e=new FormData;Object.entries(this.newUser).forEach((([s,a])=>{"confirmPassword"!=s&&e.append(s,a)})),n.api.post("api/user/create",e,{headers:{"x-access-token":this.$store.getters.token,"Content-Type":"multipart/form-data"}}).then((e=>{this.newUser={},this.newUser=e.data[0],this.newUser.image=e.data[0].image,this.success("Usuario agregado correctamente"),this.$emit("new-user",this.newUser),this.$emit("close-dialog")})).catch((e=>{this.error(e.response.data.Message),401==e.status&&(this.$store.commit("updateAuth",{auth:!1}),this.$router.push("login"))}))}}};var V=a(4260),I=a(151),C=a(5589),Q=a(8689),W=a(4554),T=a(8240),E=a(4689),Z=a(5863),M=a(1052),D=a(677),B=a(7518),S=a.n(B);const z=(0,V.Z)(q,[["render",b]]),N=z;S()(q,"components",{QCard:I.Z,QCardSection:C.Z,QForm:Q.Z,QIcon:W.Z,QBtn:T.Z,QInput:E.Z,QSelect:Z.Z,QFile:M.Z}),S()(q,"directives",{ClosePopup:D.Z});var H=a(2323),K=a(1079),j=a.n(K);const F={class:"text-red text-h4 q-px-md q-pt-md q-pb-sm"},J={class:"text-red text-h4 q-pb-md"},R={key:0,class:"text-h6 q-pa-md q-mb-md"},Y={key:1,class:"text-h6 q-pa-md q-mb-md"},O={key:2,class:"text-h6 q-pa-md q-mb-md"},X={class:"absolute-bottom q-pb-sm q-my-lg"};function L(e,s,a,r,l,i){const o=(0,t.up)("q-img"),d=(0,t.up)("q-avatar"),n=(0,t.up)("q-card-section"),u=(0,t.up)("q-btn"),m=(0,t.up)("q-card"),c=(0,t.up)("EditUser"),p=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(m,{class:"text-center",user:a.user,style:{"min-height":"100%","min-width":"250px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{class:"q-pb-xl"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{size:"1250%",class:"absolute-center q-gutter-md"},{default:(0,t.w5)((()=>[null==a.user.image||"null"==a.user.image?((0,t.wg)(),(0,t.j4)(o,{key:0,src:j(),alt:"user-img",class:"rounded-img",width:"150px",height:"150px",loading:"lazy","spinner-color":"white"})):((0,t.wg)(),(0,t.j4)(o,{key:1,src:a.user.image,alt:a.user.username,class:"rounded-img",width:"150px",height:"150px",loading:"lazy","spinner-color":"white"},null,8,["src","alt"]))])),_:1})])),_:1}),(0,t.Wm)(n,{class:"q-py-xl q-mb-xl"},{default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t._)("div",F,(0,H.zw)(a.user.firstName),1),(0,t._)("div",J,(0,H.zw)(a.user.lastName),1),1==a.user.userTypeId?((0,t.wg)(),(0,t.iD)("div",R," Administrador ")):(0,t.kq)("",!0),2==a.user.userTypeId?((0,t.wg)(),(0,t.iD)("div",Y," Punto de venta ")):(0,t.kq)("",!0),3==a.user.userTypeId?((0,t.wg)(),(0,t.iD)("div",O," Trabajador social ")):(0,t.kq)("",!0)])])),_:1}),(0,t.Wm)(n,{class:"justify-end absolute-bottom"},{default:(0,t.w5)((()=>[(0,t._)("div",X,[(0,t.Wm)(u,{class:"q-px-xl q-mt-xl",icon:"edit",color:"red",label:"Editar",onClick:s[0]||(s[0]=e=>r.editCard=!0)})])])),_:1})])),_:1},8,["user"]),(0,t.Wm)(p,{modelValue:r.editCard,"onUpdate:modelValue":s[1]||(s[1]=e=>r.editCard=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{onEditUser:i.editUser,onRemoveUser:i.removeUser,user:a.user},null,8,["onEditUser","onRemoveUser","user"])])),_:1},8,["modelValue"])],64)}const G={class:"full-width row justify-between q-py-lg q-px-xl"},$={class:"col-6 col-md-11 flex"},_=(0,t._)("span",{class:"dialog__title q-my-auto q-pl-md text-h5"}," Editar usuario ",-1),ee={class:"col-6 col-md-1 flex"},se={class:"q-py-lg q-px-xl text-h6"},ae=(0,t.Uk)(" Nombre(s) "),te=(0,t.Uk)(" Apellido(s) "),re=(0,t.Uk)(" Email "),le=(0,t.Uk)(" Usuario "),ie=(0,t.Uk)(" Contraseña "),oe=(0,t.Uk)(" Confirmar contraseña "),de=(0,t.Uk)(" Puesto "),ne=(0,t.Uk)(" Imagen "),ue={class:"row justify-evenly q-py-md"},me=(0,t._)("span",{class:"q-ml-sm text-h5"},"¿Desea eliminar este usuario?",-1);function ce(e,s,a,r,l,i){const o=(0,t.up)("q-icon"),d=(0,t.up)("q-btn"),n=(0,t.up)("q-input"),u=(0,t.up)("q-select"),m=(0,t.up)("q-file"),c=(0,t.up)("q-card-section"),p=(0,t.up)("q-card-actions"),g=(0,t.up)("q-card"),h=(0,t.up)("q-dialog"),A=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(g,{class:"dialog column full-width"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{class:"q-px-md full-width column"},{default:(0,t.w5)((()=>[(0,t._)("div",G,[(0,t._)("div",$,[(0,t.Wm)(o,{name:"account_circle",size:"300%"}),_]),(0,t._)("div",ee,[(0,t.wy)((0,t.Wm)(d,{class:"q-ml-auto",size:"md",icon:"cancel",flat:"",round:""},null,512),[[A]])])]),(0,t._)("div",se,[ae,(0,t.Wm)(n,{class:"q-py-md",outlined:"",clearable:"",ref:"name",modelValue:l.editedUser.firstName,"onUpdate:modelValue":s[0]||(s[0]=e=>l.editedUser.firstName=e),type:"text","lazy-rules":"",rules:[e=>!!e||"Campo Obligatorio",e=>e.length<45||"El nombre debe ser menor a 45 caracteres",e=>i.isValidInput(e)||"Entrada no válida. Solo se aceptan letras"]},null,8,["modelValue","rules"]),te,(0,t.Wm)(n,{class:"q-py-md",outlined:"",clearable:"",ref:"lastname",modelValue:l.editedUser.lastName,"onUpdate:modelValue":s[1]||(s[1]=e=>l.editedUser.lastName=e),type:"text","lazy-rules":"",rules:[e=>!!e||"Campo Obligatorio",e=>e.length<45||"El apellido debe ser menor a 45 caracteres",e=>i.isValidInput(e)||"Entrada no válida. Solo se aceptan letras"]},null,8,["modelValue","rules"]),re,(0,t.Wm)(n,{class:"q-py-md",outlined:"",clearable:"",ref:"email",modelValue:l.editedUser.email,"onUpdate:modelValue":s[2]||(s[2]=e=>l.editedUser.email=e),type:"text","lazy-rules":"",rules:[e=>!!e||"Campo Obligatorio",e=>i.isValidEmailAddress(e)||"Inserte una direccion de correo electronica valida"]},null,8,["modelValue","rules"]),le,(0,t.Wm)(n,{class:"q-py-md",outlined:"",clearable:"",ref:"user",modelValue:l.editedUser.username,"onUpdate:modelValue":s[3]||(s[3]=e=>l.editedUser.username=e),type:"text","lazy-rules":"",rules:[e=>!!e||"Campo Obligatorio",e=>e.length<45||"El nombre de usuario debe ser menor a 45 caracteres",e=>i.isValidUser(e)||"Entrada no valida, solo se permiten letras y numeros"]},null,8,["modelValue","rules"]),ie,(0,t.Wm)(n,{class:"q-py-md",outlined:"",ref:"password1",modelValue:l.editedUser.password,"onUpdate:modelValue":s[5]||(s[5]=e=>l.editedUser.password=e),type:r.pwd?"password":"text","lazy-rules":"",rules:[e=>!!e||"Campo Obligatorio",e=>e.length<=32||"La contraseña debe ser menor o igual a 32 caracteres",e=>i.isValidPassword(e)||"Se requieren: mayusculas, minusculas, numeros y signos. De 8 a 32 caracteres."]},{append:(0,t.w5)((()=>[(0,t.Wm)(o,{name:r.pwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[4]||(s[4]=e=>r.pwd=!r.pwd)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),oe,(0,t.Wm)(n,{class:"q-py-md",outlined:"",ref:"password2",modelValue:l.editedUser.confirmPassword,"onUpdate:modelValue":s[7]||(s[7]=e=>l.editedUser.confirmPassword=e),type:r.confirmPwd?"password":"text","lazy-rules":"",rules:[e=>!!e||"Campo Obligatorio",e=>e.length<=32||"La contraseña debe ser menor o igual a 32 caracteres",e=>i.isValidPassword(e)||"Se requieren: mayusculas, minusculas, numeros y signos. De 8 a 32 caracteres."]},{append:(0,t.w5)((()=>[(0,t.Wm)(o,{name:r.confirmPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[6]||(s[6]=e=>r.confirmPwd=!r.confirmPwd)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),de,(0,t.Wm)(u,{outlined:"",modelValue:l.editedUser.userTypeId,"onUpdate:modelValue":s[8]||(s[8]=e=>l.editedUser.userTypeId=e),options:r.options,class:"q-py-md"},null,8,["modelValue","options"]),ne,(0,t.Wm)(m,{outlined:"",class:"dialog__upload q-my-md",modelValue:l.editedUser.image,"onUpdate:modelValue":s[9]||(s[9]=e=>l.editedUser.image=e),accept:".jpg, .jpeg, .png, image/*","max-file-size":"5242880",onRejected:s[10]||(s[10]=e=>i.error("El archivo no es una imagen o pesa más de 5 MB. Inténtelo de nuevo"))},{prepend:(0,t.w5)((()=>[(0,t.Wm)(o,{name:"attach_file"})])),_:1},8,["modelValue"])]),(0,t._)("div",ue,[(0,t.Wm)(d,{class:"q-px-md",size:"lg",push:"",icon:"delete",color:"red",label:"Eliminar",onClick:s[11]||(s[11]=e=>r.dialog=!0)}),(0,t.wy)((0,t.Wm)(d,{class:"q-px-md",size:"lg",push:"",icon:"save",color:"green",label:"Guardar",onClick:s[12]||(s[12]=e=>i.editUser())},null,512),[[A]]),(0,t.Wm)(h,{modelValue:r.dialog,"onUpdate:modelValue":s[14]||(s[14]=e=>r.dialog=e),persistent:"",class:"q-pa-xl"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{class:"q-pa-xl"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{class:"row items-center"},{default:(0,t.w5)((()=>[me])),_:1}),(0,t.Wm)(p,{align:"center"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(d,{class:"q-px-lg q-mx-lg",size:"lg",push:"",color:"blue",label:"Cancelar"},null,512),[[A]]),(0,t.wy)((0,t.Wm)(d,{class:"q-px-lg q-mx-lg",size:"lg",push:"",color:"red",label:"Eliminar",onClick:s[13]||(s[13]=e=>i.deleteUser())},null,512),[[A,2]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})])),_:1})}const pe={name:"EditUser",props:{user:Object},data(){return{editedUser:{}}},setup(){return{dialog:(0,d.iH)(!1),pwd:(0,d.iH)(!0),confirmPwd:(0,d.iH)(!0),model:(0,d.iH)(null),options:["Admin","Punto de venta","Trabajador Social"]}},mounted(){this.editedUser=JSON.parse(JSON.stringify(this.user)),1==this.editedUser.userTypeId?this.editedUser.userTypeId="Admin":2==this.editedUser.userTypeId?this.editedUser.userTypeId="Punto de venta":3==this.editedUser.userTypeId&&(this.editedUser.userTypeId="Trabajador Social")},methods:{success(e){this.$q.notify({message:e,icon:"done",color:"green"})},error(e){this.$q.notify({message:e,icon:"error",color:"red"})},isValidInput(e){const s=/^.[.a-zA-ZÀ-ÿ\u00f1\u00d1]+(\s*[.a-zA-ZÀ-ÿ\u00f1\u00d1]*)*[.a-zA-ZÀ-ÿ\u00f1\u00d1]+$/;return s.test(String(e))},isValidEmailAddress(e){const s=/^(([^<>()\]\\.,;:\s@"]+(\.[^<>()\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return s.test(String(e).toLowerCase())},isValidPassword(e){const s=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!.%*?&])([A-Za-z\d$@$!%*?&]|[^ ]){8,32}$/;return s.test(String(e))},isValidUser(e){const s=/^[A-Za-z0-9\s]+$/g;return s.test(String(e))},editUser(){if(this.$refs.name.validate(),this.$refs.lastname.validate(),this.$refs.email.validate(),this.$refs.user.validate(),this.$refs.password1.validate(),this.$refs.password2.validate(),this.editedUser.password!=this.editedUser.confirmPassword)return void this.error("Las contraseñas no coinciden. Inténtelo de nuevo");"Admin"==this.editedUser.userTypeId?this.editedUser.userTypeId=1:"Punto de venta"==this.editedUser.userTypeId?this.editedUser.userTypeId=2:"Trabajador Social"==this.editedUser.userTypeId&&(this.editedUser.userTypeId=3);const e=new FormData;Object.entries(this.editedUser).forEach((([s,a])=>{"confirmPassword"!=s&&e.append(s,a)})),n.api.patch("api/user/"+this.editedUser.id,e,{headers:{"x-access-token":this.$store.getters.token,"Content-Type":"multipart/form-data"}}).then((e=>{this.editedUser={},this.editedUser=e.data[0],this.editedUser.id==this.$store.getters.id&&(this.$store.commit("updateFirstName",{firstName:this.editedUser.firstName}),this.$store.commit("updateImage",{image:this.editedUser.image}),this.$store.commit("updateUserType",{userType:this.editedUser.userTypeId}),1!=this.$store.getters.userType&&(this.$store.commit("updateAuth",{auth:!1}),this.$router.push("login"))),this.editedUser.image=e.data[0].image,this.success("Usuario editado correctamente"),this.$emit("edit-user",this.editedUser),this.dialog=!1})).catch((e=>{this.error(e.response.data.Message),401==e.status&&(this.$store.commit("updateAuth",{auth:!1}),this.$router.push("login"))}))},deleteUser(){this.$store.getters.id.toString()!=this.editedUser.id.toString()?n.api["delete"]("api/user/"+this.editedUser.id,{headers:{"x-access-token":this.$store.getters.token}}).then((e=>{this.$emit("remove-user",this.editedUser),this.success("Usuario eliminado"),this.dialog=!1})).catch((e=>{this.error(e.response.data.Message),401==e.status&&(this.$store.commit("updateAuth",{auth:!1}),this.$router.push("login"))})):this.error("No puedes borrarte a ti mismo")}}};var ge=a(6778),he=a(9367);const Ae=(0,V.Z)(pe,[["render",ce]]),we=Ae;S()(pe,"components",{QCard:I.Z,QCardSection:C.Z,QIcon:W.Z,QBtn:T.Z,QInput:E.Z,QSelect:Z.Z,QFile:M.Z,QDialog:ge.Z,QCardActions:he.Z}),S()(pe,"directives",{ClosePopup:D.Z});const Ue={name:"UserCard",components:{EditUser:we},props:{user:Object},setup(){return{editCard:(0,d.iH)(!1)}},methods:{editUser(e){this.$emit("edit-user",e)},removeUser(e){this.$emit("remove-user",e)}}};var ve=a(5096),fe=a(4027);const ye=(0,V.Z)(Ue,[["render",L]]),ke=ye;S()(Ue,"components",{QCard:I.Z,QCardSection:C.Z,QAvatar:ve.Z,QImg:fe.Z,QBtn:T.Z,QDialog:ge.Z});const Pe={name:"Staff",components:{AddUser:N,UserCard:ke},data(){return{users:[]}},setup(){return{filter:(0,d.iH)(""),add:(0,d.iH)(!1)}},beforeCreate(){1!=this.$store.getters.userType&&this.$router.push("/")},beforeMount(){this.getUsers()},methods:{getUsers(){u.Z.show(),n.api.get("api/user",{headers:{"x-access-token":this.$store.getters.token}}).then((e=>{this.users=e.data,u.Z.hide()})).catch((e=>{this.error(e.response.data.Message),401==e.response.status&&(u.Z.hide(),this.$store.commit("updateAuth",{auth:!1}),this.$router.push("login"))}))},addUser(e){this.users.splice(this.users.length,0,e)},editUser(e){let s=this.users.findIndex((s=>s.id===e.id));this.users.splice(s,1,e),e.id==this.$store.getters.id&&this.$emit("update-user",e)},removeUser(e){let s=this.users.findIndex((s=>s.id===e.id));this.users.splice(s,1)},closeDialog(){this.add=!1}}},xe=(0,V.Z)(Pe,[["render",o]]),be=xe;S()(Pe,"components",{QBtn:T.Z,QDialog:ge.Z})},1079:e=>{e.exports="data:image/png;base64,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"}}]);