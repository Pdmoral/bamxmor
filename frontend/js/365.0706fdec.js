"use strict";(self["webpackChunkbamxx"]=self["webpackChunkbamxx"]||[]).push([[365],{9365:(e,a,s)=>{s.r(a),s.d(a,{default:()=>ie});var t=s(3673);const o=e=>((0,t.dD)("data-v-e47c3176"),e=e(),(0,t.Cn)(),e),l={class:"bordered q-pa-xl row justify-center"},n=o((()=>(0,t._)("div",{class:"text-weight-bold text-h6"}," Escanear código de barras ",-1))),i=o((()=>(0,t._)("div",{class:"text-weight-bold text-h6"}," Insertar manualmente ",-1)));function r(e,a,s,o,r,c){const d=(0,t.up)("q-icon"),u=(0,t.up)("q-card-section"),m=(0,t.up)("q-card"),p=(0,t.up)("Scan"),f=(0,t.up)("q-dialog"),h=(0,t.up)("Type"),b=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(b,{class:"column justify-center"},{default:(0,t.w5)((()=>[(0,t._)("div",l,[(0,t.Wm)(m,{class:"mycard bg-green q-ma-sm q-mx-lg cursor-pointer",onClick:a[0]||(a[0]=e=>o.scanC=!0)},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{class:"full-height column flex-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{name:"qr_code_scanner",size:"800%",class:"q-pa-md"}),n])),_:1})])),_:1}),(0,t.Wm)(m,{class:"mycard bg-yellow q-ma-sm q-mx-lg cursor-pointer",onClick:a[1]||(a[1]=e=>o.type=!0)},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{class:"full-height column flex-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{name:"edit_note",size:"800%",class:"q-pa-md"}),i])),_:1})])),_:1})]),(0,t.Wm)(f,{modelValue:o.scanC,"onUpdate:modelValue":a[2]||(a[2]=e=>o.scanC=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(p)])),_:1},8,["modelValue"]),(0,t.Wm)(f,{modelValue:o.type,"onUpdate:modelValue":a[3]||(a[3]=e=>o.type=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(h)])),_:1},8,["modelValue"])])),_:1})}var c=s(8880);const d=(0,t._)("span",{class:"q-px-lg q-pt-lg text-h4 col self-center"}," Escanée el código de barras ",-1);function u(e,a,s,o,l,n){const i=(0,t.up)("q-btn"),r=(0,t.up)("q-icon"),u=(0,t.up)("q-card-section"),m=(0,t.up)("q-inner-loading"),p=(0,t.up)("q-input"),f=(0,t.up)("q-card"),h=(0,t.up)("Beneficiary"),b=(0,t.up)("q-dialog"),y=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(f,{class:"card fit content-center"},{default:(0,t.w5)((()=>[(0,t._)("form",null,[(0,t.Wm)(u,{class:"q-px-md column"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(i,{icon:"close",size:"sm",flat:"",rounded:"",class:"card__button self-end"},null,512),[[y]]),(0,t.Wm)(r,{name:"ion-barcode",size:"1300%",class:"q-pa-lg col self-center"}),d])),_:1}),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,{showing:o.visible,size:"5.5em"},null,8,["showing"])])),_:1}),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(p,{class:"card__input",outlined:"",autofocus:"",dense:"",modelValue:o.folio,"onUpdate:modelValue":a[0]||(a[0]=e=>o.folio=e),onKeyup:a[1]||(a[1]=(0,c.D2)((e=>n.searchBenef(o.folio)),["enter"]))},null,8,["modelValue"])])),_:1})])])),_:1}),(0,t.Wm)(b,{modelValue:o.benef,"onUpdate:modelValue":a[2]||(a[2]=e=>o.benef=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{beneficiary:l.beneficiary[0]},null,8,["beneficiary"])])),_:1},8,["modelValue"])],64)}const m={class:"full-width row justify-between q-py-lg q-px-lg"},p={class:"col-12 col-md-11 flex"},f=(0,t._)("span",{class:"beneficiaryCard__title q-my-auto q-pl-sm"}," Entregar paquete ",-1),h={class:"row q-py-lg q-px-md text-h6"},b={class:"col-12 q-px-md"},y=(0,t.Uk)(" Folio de la familia "),q={class:"col-12 q-px-md"},g=(0,t.Uk)(" Titular "),_={class:"col-12 col-sm-6 q-px-md"},x=(0,t.Uk)(" Comunidad "),v={class:"col-12 col-sm-6 q-px-md"},w=(0,t.Uk)(" Grupo "),W={class:"col-12 col-sm-6 q-px-md rounded-borders column"},V=(0,t.Uk)(" Lleva producto extra "),Z={class:"col-12 col-sm-6"},C=(0,t.Uk)(" Total extra "),Q={class:"row justify-center q-my-auto"};function k(e,a,s,o,l,n){const i=(0,t.up)("q-icon"),r=(0,t.up)("q-input"),c=(0,t.up)("q-checkbox"),d=(0,t.up)("q-btn"),u=(0,t.up)("q-form"),k=(0,t.up)("q-card-section"),U=(0,t.up)("q-card"),I=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(U,{class:"beneficiaryCard column"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{class:"q-px-md full-height column"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{onsubmit:"return false"},{default:(0,t.w5)((()=>[(0,t._)("div",m,[(0,t._)("div",p,[(0,t.Wm)(i,{name:"account_circle",size:"300%"}),f])]),(0,t._)("div",h,[(0,t._)("div",b,[y,(0,t.Wm)(r,{class:"q-py-md",outlined:"",clearable:"",modelValue:l.benefit.Id,"onUpdate:modelValue":a[0]||(a[0]=e=>l.benefit.Id=e),type:"text",disable:"",readonly:""},null,8,["modelValue"])]),(0,t._)("div",q,[g,(0,t.Wm)(r,{class:"q-py-md",outlined:"",clearable:"",modelValue:l.benefit.name,"onUpdate:modelValue":a[1]||(a[1]=e=>l.benefit.name=e),type:"text",disable:"",readonly:""},null,8,["modelValue"])]),(0,t._)("div",_,[x,(0,t.Wm)(r,{class:"q-py-md",outlined:"",clearable:"",modelValue:l.benefit.communityName,"onUpdate:modelValue":a[2]||(a[2]=e=>l.benefit.communityName=e),type:"text",disable:"",readonly:""},null,8,["modelValue"])]),(0,t._)("div",v,[w,(0,t.Wm)(r,{class:"q-py-md",outlined:"",clearable:"",modelValue:l.benefit.groupName,"onUpdate:modelValue":a[3]||(a[3]=e=>l.benefit.groupName=e),type:"text",disable:"",readonly:""},null,8,["modelValue"])]),(0,t._)("div",W,[V,(0,t.Wm)(c,{class:"self-center q-pt-md",size:"md",modelValue:l.disable,"onUpdate:modelValue":a[4]||(a[4]=e=>l.disable=e)},null,8,["modelValue"])]),(0,t._)("div",Z,[C,(0,t.Wm)(r,{disable:!l.disable,class:"q-py-md",outlined:"",modelValue:l.price,"onUpdate:modelValue":a[5]||(a[5]=e=>l.price=e),type:"number",prefix:"$","lazy-rules":"",rules:[e=>e>0||"Escriba un precio real",e=>e.length>0]},null,8,["disable","modelValue","rules"])])]),(0,t._)("div",Q,[(0,t.wy)((0,t.Wm)(d,{class:"q-px-md q-ma-md",size:"md",push:"",icon:"cancel",color:"red",label:"Rechazar"},null,512),[[I,2]]),(0,t.wy)((0,t.Wm)(d,{class:"q-px-md q-ma-md",size:"md",push:"",icon:"check",color:"green",label:"Confirmar",onClick:a[6]||(a[6]=e=>n.markAttendance())},null,512),[[I,2]])])])),_:1})])),_:1})])),_:1})}var U=s(5474),I=s(1959);const $={name:"Beneficiary",props:{beneficiary:Object},data(){return{benefit:{},price:(0,I.iH)(null),disable:(0,I.iH)(!1),close:0}},mounted(){this.benefit=JSON.parse(JSON.stringify(this.beneficiary))},methods:{success(e){this.$q.notify({message:e,icon:"done",color:"green"})},markAttendance(){if((this.price>0||!this.disable||"active"!=this.benefit.status)&&"NULL"!=this.benefit.day){if(0==this.disable&&(this.disable=0),1==this.disable&&(this.disable=1),"active"!=this.benefit.status)return void this.error("El usaurio está inactivo. Favor de pasar con Trabajo social");const e={familyId:this.beneficiary.Id,userId:this.$store.getters.id,extraProduct:this.disable,extraProductPrice:this.price};U.api.post("api/attendance/create",e,{headers:{"x-access-token":this.$store.getters.token}}).then((e=>{this.success("¡Asistencia creada!")})).catch((e=>{404==e.response.status?this.error("No se encontró al usuario. Inténtelo de nuevo"):401==e.response.status?(this.$store.commit("updateAuth",{auth:!1}),this.$router.push("login")):400==e.response.status?(console.log(e),this.error(e.response.data.Message)):this.error(e.response.data.Message)}))}else if(null==this.price&&1==this.disable)this.error("Error. El precio debe ser mayor de cero");else{if("active"!=this.benefit.status)return void this.error("El usaurio está inactivo. Favor de pasar con Trabajo social");"NULL"!=this.benefit.day&&void 0!=this.benefit.day||this.error("Error. El usuario no cuenta con fecha de asistencia. Favor de asignarlo con Trabajo Social.")}},error(e){this.$q.notify({message:e,icon:"error",color:"red"})}}};var z=s(4260),B=s(151),j=s(5589),H=s(8689),S=s(4554),E=s(4689),N=s(1420),D=s(8240),A=s(677),F=s(7518),P=s.n(F);const T=(0,z.Z)($,[["render",k]]),L=T;P()($,"components",{QCard:B.Z,QCardSection:j.Z,QForm:H.Z,QIcon:S.Z,QInput:E.Z,QCheckbox:N.Z,QBtn:D.Z}),P()($,"directives",{ClosePopup:A.Z});const M={name:"Scan",components:{Beneficiary:L},data(){return{beneficiary:[]}},setup(){(0,I.iH)(!1);return{visible:(0,I.iH)(!0),folio:(0,I.iH)(""),benef:(0,I.iH)(!1)}},methods:{searchBenef(){U.api.get(`api/beneficiary/${this.folio}`,{headers:{"x-access-token":this.$store.getters.token}}).then((e=>{this.beneficiary=e.data,this.beneficiary&&(this.benef=!0)})).catch((e=>{404==e.response.status?this.error("No se encontró al usuario. Inténtelo de nuevo"):401==e.response.status?(this.$store.commit("updateAuth",{auth:!1}),this.$router.push("login")):this.error(e.response.data.Message)}))},error(e){this.$q.notify({message:e,icon:"error",color:"red"})}}};var O=s(6941),J=s(6778);const Y=(0,z.Z)(M,[["render",u]]),G=Y;P()(M,"components",{QCard:B.Z,QCardSection:j.Z,QBtn:D.Z,QIcon:S.Z,QInnerLoading:O.Z,QInput:E.Z,QDialog:J.Z}),P()(M,"directives",{ClosePopup:A.Z});const K={class:"typeCard__titlee q-my-sm q-pa-md"},R=(0,t.Uk)(" Ingresar manualmente el beneficiario "),X={class:"row justify-center q-my-auto"};function ee(e,a,s,o,l,n){const i=(0,t.up)("q-icon"),r=(0,t.up)("q-input"),c=(0,t.up)("q-card-section"),d=(0,t.up)("q-btn"),u=(0,t.up)("q-form"),m=(0,t.up)("q-card"),p=(0,t.up)("Beneficiary"),f=(0,t.up)("q-dialog"),h=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(m,{class:"typeCard column justify-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,{class:"q-px-md full-height column"},{default:(0,t.w5)((()=>[(0,t._)("span",K,[(0,t.Wm)(i,{name:"account_circle",size:"md"}),R]),(0,t.Wm)(r,{outlined:"",autofocus:"",modelValue:o.folio,"onUpdate:modelValue":a[0]||(a[0]=e=>o.folio=e),class:"q-pa-xl",label:"Folio del beneficiario","lazy-rules":"",rules:[e=>e&&e.length>0||"Campo obligatorio",e=>n.isValidBenef(e)||"Entrada no válida, solo se permiten letras y números"]},null,8,["modelValue","rules"])])),_:1}),(0,t.Wm)(c,{class:"q-pa-xl justify-center"},{default:(0,t.w5)((()=>[(0,t._)("div",X,[(0,t.wy)((0,t.Wm)(d,{class:"q-px-md q-ma-md",size:"md",push:"",icon:"cancel",color:"red",label:"Cancelar"},null,512),[[h]]),(0,t.Wm)(d,{class:"q-px-md q-ma-md",size:"md",push:"",type:"submit",icon:"check",color:"green",label:"Confirmar",onClick:a[1]||(a[1]=e=>n.searchBenef())})])])),_:1})])),_:1})])),_:1}),(0,t.Wm)(f,{modelValue:o.benef,"onUpdate:modelValue":a[2]||(a[2]=e=>o.benef=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{beneficiary:l.beneficiary[0]},null,8,["beneficiary"])])),_:1},8,["modelValue"])],64)}const ae={name:"Scan",components:{Beneficiary:L},data(){return{beneficiary:[]}},setup(){(0,I.iH)(!1);return{folio:(0,I.iH)(""),benef:(0,I.iH)(!1)}},methods:{success(e){this.$q.notify({message:e,icon:"done",color:"green"})},isValidBenef(e){const a=/^[A-Za-z0-9\s]+$/g;return a.test(String(e))},searchBenef(){this.folio.length>0&&U.api.get(`api/beneficiary/${this.folio}`,{headers:{"x-access-token":this.$store.getters.token}}).then((e=>{this.beneficiary=e.data,this.beneficiary&&(this.benef=!0)})).catch((e=>{console.log(e),404==e.response.status?this.error("No se encontró al usuario. Inténtelo de nuevo"):401==e.response.status?(this.$store.commit("updateAuth",{auth:!1}),this.$router.push("login")):(e.response.status,this.error(e.response.data.Message))}))},error(e){this.$q.notify({message:e,icon:"error",color:"red"})}}},se=(0,z.Z)(ae,[["render",ee]]),te=se;P()(ae,"components",{QCard:B.Z,QForm:H.Z,QCardSection:j.Z,QIcon:S.Z,QInput:E.Z,QBtn:D.Z,QDialog:J.Z}),P()(ae,"directives",{ClosePopup:A.Z});const oe={name:"Deliveries",components:{Scan:G,Type:te},setup(){return{scanC:(0,I.iH)(!1),type:(0,I.iH)(!1)}}};var le=s(4379);const ne=(0,z.Z)(oe,[["render",r],["__scopeId","data-v-e47c3176"]]),ie=ne;P()(oe,"components",{QPage:le.Z,QCard:B.Z,QCardSection:j.Z,QIcon:S.Z,QDialog:J.Z})}}]);